import org.apache.hc.client5.http.classic.methods.HttpGet;
import org.apache.hc.client5.http.impl.classic.CloseableHttpClient;
import org.apache.hc.client5.http.impl.classic.CloseableHttpResponse;
import org.apache.hc.client5.http.impl.classic.HttpClients;
import org.apache.hc.core5.ssl.SSLContextBuilder;
import org.apache.hc.core5.ssl.SSLContexts;
import org.apache.hc.core5.http.io.entity.EntityUtils;

import javax.net.ssl.SSLContext;
import java.io.File;

public class ApacheHttpClientWithJKS {

    public static void main(String[] args) throws Exception {
        String jksPath = "ruta/cliente.jks";
        String jksPassword = "tu_password";

        // Crear contexto SSL con JKS
        SSLContext sslContext = SSLContextBuilder.create()
                .loadKeyMaterial(new File(jksPath), jksPassword.toCharArray(), jksPassword.toCharArray())
                .build();

        // Crear cliente Http con el contexto SSL
        try (CloseableHttpClient httpClient = HttpClients.custom()
                .setSSLContext(sslContext)
                .build()) {

            HttpGet request = new HttpGet("https://tuservicio.com/api/recurso");
            try (CloseableHttpResponse response = httpClient.execute(request)) {
                System.out.println("CÃ³digo de respuesta: " + response.getCode());
                String responseBody = EntityUtils.toString(response.getEntity());
                System.out.println("Cuerpo de la respuesta: " + responseBody);
            }
        }
    }
}
